<!doctype html>
<html lang="en">
  <head>
    <title>Оперативный план</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    

    {% load static %}
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css" >
    <!-- Bootstrap JS + Popper JS -->
    <script defer src="/static/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="{% static 'css/styles_mh.css' %}" />
    <link rel="shortcut icon" href="/static/image/site_logo.png" />
    
    <style>
      /* Индикатор загрузки */
      #loadingIndicator {
        display: none;
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        z-index: 1000;
      }
      
      .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid rgba(0, 0, 0, 0.1);
        border-top: 4px solid #000;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var form = document.querySelector('form');
        var loadingIndicator = document.getElementById('loadingIndicator');

        form.addEventListener('submit', function() {
          loadingIndicator.style.display = 'block';
        });
      });
    </script>
  </head>

  <body style="margin: 0; overflow: scroll">
    <header class="header">
      <a href="/homepage/">
        <img class="header__logo" src="/static/image/polyus_logo.png">
      </a>
    </header>
    

    <h1 class="page_header">Оперативный план</h1>

    <!-- Индикатор загрузки -->
    <div id="loadingIndicator">
      <div class="spinner"></div>
    </div>

    <form method="POST" style="margin-left: 10px; margin-top: 40px; width: 500px" action="{% url 'op' %}" enctype="multipart/form-data">
      {% csrf_token %}
      
      <div class="mb-3">
        <label for="branch" class="form-label">Филиал:</label>
        <select name ="select_branch" class="form-select" id="branch">
          <option value="IRK">IRK</option>
          <option value="KRS">KRS</option>
          <option value="MGD">MGD</option>
          <option value="YAK">YAK</option>
        </select>
      </div>

      <div class="mb-3">
        <div class="row">

          <div class="col">
            <label for="month" class="form-label">Месяц:</label>
            <select name ="select_month" class="form-select" id="month">
              <option value="Январь">Январь</option>
              <option value="Февраль">Февраль</option>
              <option value="Март">Март</option>
              <option value="Апрель">Апрель</option>
              <option value="Май">Май</option>
              <option value="Июнь">Июнь</option>
              <option value="Июль">Июль</option>
              <option value="Август">Август</option>
              <option value="Сентябрь">Сентябрь</option>
              <option value="Октябрь">Октябрь</option>
              <option value="Ноябрь">Ноябрь</option>
              <option value="Декабрь">Декабрь</option>
            </select>
          </div>

          <div class="col">
            <label for="year" class="form-label">Год:</label>
            <select name ="select_year" class="form-select" id="year">
              <option value="2024">2024</option>
              <option value="2025">2025</option>
              <option value="2026">2026</option>
              <option value="2027">2027</option>
              <option value="2028">2028</option>
            </select>
          </div>

        </div>
      </div>

      <div class="mb-3">
        <label for="formPlanFile" class="form-label">
          Объемный план:
          <a href="" class="custom-tooltip">
            <img  class="question_logo" src="/static/image/question.svg">
            <span class="tooltip-text">Файл с потребностью от заказчиков</span>
          </a>
        </label>
        <input name ="plan_file" class="form-control" type="file" accept=".xl*"  id="formPlanFile" required>
      </div>

      <div class="mb-3">
        <label for="formDirectoryFile" class="form-label">
          Справочник:
          <a href="" class="custom-tooltip">
            <img  class="question_logo" src="/static/image/question.svg">
            <span class="tooltip-text">Файл со списком доступных ресурсов</span>
          </a>
        </label>
        <input name ="dir_file" class="form-control" type="file" accept=".xl*"  id="formDirectoryFile" required>
      </div>

      <input id="startButton" type="submit" class="btn btn-warning upload" value="Загрузить" style="margin-top: 15px; width: 500px;">

    </form>
  </body>

</html>
